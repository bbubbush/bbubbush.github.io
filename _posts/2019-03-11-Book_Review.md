---
layout: post
title: <그림으로 공부하는 오라클구조> Chapter4. SQL문 분석과 공유 풀
category: Book_Review
categories: Book_Review
author: bbubbush
comments: true
published : false
---

##### SQL문과 일반적인 프로그래밍 언어의 차이
SQL은 처리방법에 대해 기술하지 않는다는게 일반적인 프로그래밍 언어와의 큰 차이라고 할 수 있다. 아래 간단한 쿼리가 있다.
```
SELECT A
  FROM B
 WHERE C = 1
```
B라는 테이블에서 C가 1이라는 조건을 만족하는 데이터의 A컬럼의 값을 꺼내 오라는 의미는 알겠다. 그럼 어떻게 처리하는지에 대해서도 알겠는가? 난 잘 모르겠다.
풀 스캔을 통해 데이터를 전부 조회할지, 인덱스를 활용하여 데이터를 조회할지 개발자는 그저 결과만 받을 뿐이다.

'어떻게 처리할지'에 대해 고민하는 것이 바로 옵티마이저다.


크게 Rule base, Cost base로 구분되지만 오라클 10g부터는 Cost base로만 동작한다.


적합한 실행비용과 부적합한 실행비용의 차이

선택가능한 실행계획이 많다는 점, 어디까지나 예측에 지나지 않다는 점   이것이 옵티마이저의 비용계산이 갖고 있는 문제

공유풀을 통해 실행계획을 공유하면 분석에 사용되는 CPU자원을 아낄 수 있다.


공유풀은 SGA안에 존재하며 딕셔너리캐시, 라이브러리 캐시 등으로 구성되어 있다.

SQL문을 해시값으로 저장하여 관리. 따라서 소문자로 작성한 쿼리와 대문자로 작성한 쿼리는 해시값이 달라 다르게 관리된다.(SQL표준을 따라야 하는 이유)

매번 중복되는 SQL문을 사용해야할 때는 바인딩 변수를 활용하면 해시값이 일관되어 빠른 실행계획을 비용없이 사용할 수 있다.

